# Development Notes - 2025-10-19

**Task**: T-05-01-jsonrpc-schema
**Date**: 2025-10-19

---

## Technical Notes

### Schema Observations

- Entity snippet object is marked with required fields fold, preview, and full even when snippet_mode indicates reduced payloads; contract needs optionality to avoid violating client expectations.
- Top-level jsonrpc-schema.json aggregates method definitions but is not a standalone JSON Schema document that validators can consume directly; need explicit definitions per request/response or generator support (schemars).
- Error catalogue and versioning docs reference 2025-10-20; update to actual edit date (2025-10-19) to avoid timeline confusion.
- docs/api/README.md links to ../../../tests/fixtures/api which resolves outside repo root; should be ../../tests/fixtures/api.

### Test Coverage Gaps

- service_contract_tests.rs only validates handcrafted serde_json fixtures and never loads jsonrpc-schema.json, so acceptance criterion about schema validation remains unmet.
- No automated check that CLI or agent outputs respect the schema; TODO to plug schema validation into integration tests.

## Research & Learning

- Reviewed PRD-05, Issue-05, and TODO.yaml to confirm deliverable alignment; current artifacts partially satisfy documentation deliverable but not validation requirements.
- Evaluated jsonschema crate and schemars as potential paths for runtime validation versus generated schema parity.

## TODO / Follow-up

- [ ] Relax snippet.required fields or conditionally omit unused variants based on snippet_mode.
- [ ] Decide on schema validation approach (schemars derived schema vs jsonschema validator) and wire into service_contract_tests.rs.
- [ ] Fix docs/api/README.md relative link to fixtures and refresh last-updated timestamps across docs/api/*.md.
- [ ] Document how CLI integration will consume schema (acceptance criterion currently unaddressed).

---

**Session Duration**: 2.0 hours
**Blockers**: Awaiting implementation ownership decisions on validation strategy.
