# Task Metadata

task:
  id: "T-06-01-parity-methodology"
  title: "LocAgent Parity Validation Methodology"
  status: "completed"  # Phase 1 completed 2025-10-20, Phase 2 completed 2025-10-24
  priority: "P0"
  milestone: "M1"
  week: 1
  duration_days: 4  # Phase 1: 2 days, Phase 2: 2 days

owner:
  primary: "Rust Lead"
  secondary:
    - "Claude Code Agent"

dates:
  started: "2025-10-20"
  target_completion: "2025-10-23"  # Phase 2 baseline extraction
  actual_completion: "2025-10-24"  # Phase 2 completed (minimal baseline strategy)

specs:
  prds:
    - "spacs/prd/0.1.0-MVP-PRDs-v0/06-rust-refactoring-plan.md"
    - "spacs/prd/0.1.0-MVP-PRDs-v0/01-system-architecture-scope.md"
  issues:
    - "spacs/issues/04-0.1.0-mvp/06-refactor-parity.md"
  tasks:
    - "spacs/tasks/0.1.0-mvp/06-refactor-parity/T-06-01-parity-methodology.md"

git:
  worktree: ".worktrees/T-06-01-parity-methodology"
  branch: "feat/task/T-06-01-parity-methodology"
  symlink: "~/dev-space/CDSAgent-T-06-01-parity-methodology"
  commits:
    - hash: "a77bea48be891d229faa7878c04befb320972186"
      message: "feat(validation): T-06-01 - Establish LocAgent parity validation methodology"
      date: "2025-10-20"
      files_changed: 10
  pr:
    number: null
    url: null
    status: null  # draft | open | merged | closed
    merged_at: null

dependencies:
  requires: []
  blocks:
    - "T-02-01-graph-builder"
    - "T-02-02-sparse-index"
    - "T-08-03-parity-validation"

deliverables:
  # Phase 1 (PR #4)
  - "docs/parity-validation-methodology.md"
  - "scripts/parity-check.sh"
  - "tests/fixtures/parity/README.md"
  - "tests/fixtures/parity/locagent_version.txt"
  - "tests/fixtures/parity/locagent_repo/"
  - "tests/fixtures/parity/sample_repos/"
  - "tests/fixtures/parity/golden_outputs/"
  # Phase 2 (2025-10-24)
  - "tests/fixtures/parity/golden_outputs/graph_django__django-10914.json"
  - "tests/fixtures/parity/golden_outputs/graph_scikit-learn__scikit-learn-10297.json"
  - "tests/fixtures/parity/golden_outputs/graph_matplotlib__matplotlib-18869.json"
  - "tests/fixtures/parity/golden_outputs/graph_pytest-dev__pytest-11143.json"
  - "tests/fixtures/parity/golden_outputs/graph_psf__requests-1963.json"
  - "tests/fixtures/parity/golden_outputs/traverse_samples.jsonl"
  - "tests/fixtures/parity/golden_outputs/search_queries.jsonl"
  - "tests/fixtures/parity/golden_outputs/performance_baselines.json"
  - "tests/fixtures/parity/golden_outputs/README.md"
  - "tests/fixtures/parity/swe-bench-lite/samples.yaml"
  - "scripts/swe-lite"
  - "scripts/fetch-swe-bench-lite.py"
  - "scripts/select-swe-bench-instances.py"
  - "scripts/extract-parity-baseline.py"
  - "scripts/extract-search-baseline.py"
  - "scripts/extract-traverse-baseline.py"
  - "scripts/benchmark-performance.py"

acceptance_criteria:
  - criterion: "Publish docs/parity-validation-methodology.md with full methodology"
    status: "completed"
    notes: "Completed 2025-10-20: 62KB comprehensive SOP with 9 sections published. Updated 2025-10-24: Added Section 10 'Known Limitations' documenting llama-index issue."
  - criterion: "Implement scripts/parity-check.sh covering graph, search, traverse, performance checks"
    status: "completed"
    notes: "Completed 2025-10-20: Functional automation script with CI integration, tested successfully"
  - criterion: "Extract and store golden outputs for 6 repos (LocAgent + 5 SWE-bench Lite)"
    status: "completed"
    notes: "Completed 2025-10-24: Graph baselines (6/6 repos: 658 to 6,876 nodes), Traverse baselines (60/60 scenarios). Search/performance baselines partial (LocAgent only) due to llama-index limitation."
  - criterion: "Track LocAgent baseline version in tests/fixtures/parity/locagent_version.txt"
    status: "completed"
    notes: "Completed 2025-10-24: Version tracking file updated with commit 38538ce, Python 3.12.7 uv environment, SKIP_DIRS modifications documented"
  - criterion: "Define and socialize parity gates for project phases"
    status: "completed"
    notes: "Completed 2025-10-20: Phase-gated checkpoints (Week 2, 5, 7, 10) documented in methodology"
  - criterion: "Document known limitations and workarounds"
    status: "completed"
    notes: "Completed 2025-10-24: llama-index SimpleDirectoryReader limitation documented in methodology Section 10 and golden_outputs/README.md. Explains why search/perf baselines are LocAgent-only and why this doesn't block CDSAgent Rust development."

worklog:
  base_path: ".artifacts/spec-tasks-T-06-01-parity-methodology/worklogs/"
  entries:
    - date: "2025-10-20"
      summary: "worklogs/2025-10-20-work-summary.md"
      commits: "worklogs/2025-10-20-commit-log.md"
      notes: "worklogs/2025-10-20-notes.md"
    - date: "2025-10-22"
      summary: "worklogs/2025-10-22-work-summary.md"
      commits: "worklogs/2025-10-22-commit-log.md"
      notes: "worklogs/2025-10-22-notes.md"
    - date: "2025-10-24"
      summary: "worklogs/2025-10-24-work-summary.md"
      commits: "worklogs/2025-10-24-commit-log.md"
      notes: "worklogs/2025-10-24-notes.md"

metrics:
  estimated_hours: 32  # 4 days * 8 hours
  actual_hours: 28  # Phase 1: 6h (2025-10-20), Review: 4h (2025-10-22), Phase 2: 18h (2025-10-24)
  lines_added: 21500  # Phase 1: 2483, Phase 2: ~19,000 (6 graph JSONs + traverse/search/perf baselines + docs)
  lines_deleted: 15  # Phase 2: Script cleanups and doc updates
  files_modified: 35  # Phase 1: 10, Phase 2: 25 (baselines, scripts, docs, metadata)
  tests_added: 0  # Parity test infrastructure created, actual tests pending in T-08-03
  test_coverage: 0.0  # Not applicable for methodology/documentation task
  baselines_extracted:
    graph: "6/6 repos (658 to 6,876 nodes)"
    traverse: "60/60 scenarios (10 Ã— 6 repos)"
    search: "1/6 repos (LocAgent only - llama-index limitation)"
    performance: "1/6 repos (LocAgent only - llama-index limitation)"

comments:
  - date: "2025-10-19"
    author: "Claude Code Agent"
    text: "Initial metadata created"
  - date: "2025-10-22"
    author: "Codex Review Agent"
    text: "Captured review context; task still pending kick-off and past target completion (2025-10-21)."
  - date: "2025-10-24"
    author: "Claude Code Agent"
    text: "Phase 2 completed: Extracted comprehensive baselines from LocAgent + 5 SWE-bench Lite repos. Graph baselines: 6/6 repos (658 to 6,876 nodes), Traverse baselines: 60/60 scenarios. Search/performance baselines: 1/6 repos (LocAgent only) due to llama-index SimpleDirectoryReader limitation - documented in methodology Section 10. Created automation toolkit (swe-lite CLI + 7 Python scripts). CDSAgent Rust implementation unaffected by limitation."

related_artifacts:
  - type: "documentation"
    path: "docs/parity-validation-methodology.md"
  - type: "script"
    path: "scripts/parity-check.sh"
  - type: "test_fixture"
    path: "tests/fixtures/parity/"
